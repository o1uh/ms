2025-05-29 18:47:07,488 - ServerApp - INFO - Запуск серверного приложения...
2025-05-29 18:47:07,489 - ServerApp - INFO - Сервер запущен и слушает на 127.0.0.1:65432
2025-05-29 18:47:07,489 - ServerApp - INFO - Для остановки сервера нажмите Ctrl+C в этой консоли.
2025-05-29 18:57:00,007 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 50422)
2025-05-29 18:57:00,029 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 18:57:05,110 - ServerApp - DEBUG - Получено от ('127.0.0.1', 50422) (аутентификация): {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 18:57:05,270 - ServerApp - INFO - Клиент ('127.0.0.1', 50422) аутентифицирован как 1111 (ID: 1)
2025-05-29 18:57:05,270 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:57:05,273 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:57:05,275 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50422)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:57:05,275 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:57:05,275 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:57:09,285 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50422)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:57:09,285 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:57:09,286 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:57:10,189 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50422)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:57:10,189 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:57:10,190 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:57:26,951 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50422)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:57:26,952 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 18:57:26,952 - ServerApp - DEBUG - Извлечено 14 сообщений для chat_id: 1
2025-05-29 18:57:30,966 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50422)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "12"}}
2025-05-29 18:57:30,970 - ServerApp - INFO - Сообщение ID: 15 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T18:57:05.111067+07:00).
2025-05-29 18:57:30,970 - ServerApp - INFO - Сообщение (ID: 15) от 1111 в чат 1 сохранено.
2025-05-29 18:57:30,970 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 18:57:37,774 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50422)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:57:37,774 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:57:37,775 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:57:48,518 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 50422)) отключился.
2025-05-29 18:57:48,518 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 50422)) удален из активных.
2025-05-29 18:57:48,518 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 50422) (пользователь: 1111) закрыто.
2025-05-29 18:57:48,518 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 50422) (пользователь: 1111) освобождены.
2025-05-29 18:57:50,377 - ServerApp - INFO - Получен сигнал KeyboardInterrupt (Ctrl+C)...
2025-05-29 18:57:50,377 - ServerApp - INFO - Сервер останавливается...
2025-05-29 18:57:50,377 - ServerApp - INFO - Сервер полностью остановлен.
