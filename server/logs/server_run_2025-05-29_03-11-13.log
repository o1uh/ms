2025-05-29 03:11:13,529 - ServerApp - INFO - Запуск серверного приложения...
2025-05-29 03:11:13,529 - ServerApp - INFO - Сервер запущен и слушает на 127.0.0.1:65432
2025-05-29 03:11:13,530 - ServerApp - INFO - Для остановки сервера нажмите Ctrl+C в этой консоли.
2025-05-29 03:11:28,842 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 49334)
2025-05-29 03:11:28,973 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 03:11:35,634 - ServerApp - DEBUG - Получено от ('127.0.0.1', 49334) (аутентификация): {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 03:11:35,798 - ServerApp - INFO - Клиент ('127.0.0.1', 49334) аутентифицирован как 1111 (ID: 1)
2025-05-29 03:11:35,798 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:11:35,801 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:11:35,801 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:11:35,801 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:11:35,802 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:11:41,656 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:11:41,657 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:11:41,657 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:11:48,562 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:11:48,562 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 03:11:48,562 - ServerApp - DEBUG - Извлечено 3 сообщений для chat_id: 1
2025-05-29 03:11:54,162 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:11:54,162 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:11:54,163 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:12:34,650 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:12:34,650 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 03:12:34,650 - ServerApp - DEBUG - Извлечено 3 сообщений для chat_id: 1
2025-05-29 03:13:01,962 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 49392)
2025-05-29 03:13:02,079 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 03:13:12,130 - ServerApp - DEBUG - Получено от ('127.0.0.1', 49392) (аутентификация): {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 03:13:17,345 - ServerApp - DEBUG - Получено от ('127.0.0.1', 49392) (аутентификация): {"type": "login", "payload": {"username": "2222", "password": "2222"}}
2025-05-29 03:13:17,507 - ServerApp - INFO - Клиент ('127.0.0.1', 49392) аутентифицирован как 2222 (ID: 2)
2025-05-29 03:13:17,507 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:13:17,510 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:13:17,511 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:13:17,511 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:13:17,511 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:13:21,834 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:13:21,834 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:13:21,834 - ServerApp - DEBUG - Извлечено 3 сообщений для chat_id: 1
2025-05-29 03:13:27,442 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "АХАХАХХАХАХА"}}
2025-05-29 03:13:27,444 - ServerApp - INFO - Сообщение ID: 4 от user_id: 2 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T03:13:12.130367+07:00).
2025-05-29 03:13:27,444 - ServerApp - INFO - Сообщение (ID: 4) от 2222 в чат 1 сохранено.
2025-05-29 03:13:27,444 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 2 - 2222): [1]
2025-05-29 03:13:27,444 - ServerApp - INFO - Доставка сообщения (ID: 4) от 2222 участнику 1111 (ID: 1) чата 1.
2025-05-29 03:16:04,737 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "а щас"}}
2025-05-29 03:16:04,738 - ServerApp - INFO - Сообщение ID: 5 от user_id: 2 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T03:13:27.444301+07:00).
2025-05-29 03:16:04,738 - ServerApp - INFO - Сообщение (ID: 5) от 2222 в чат 1 сохранено.
2025-05-29 03:16:04,739 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 2 - 2222): [1]
2025-05-29 03:16:04,739 - ServerApp - INFO - Доставка сообщения (ID: 5) от 2222 участнику 1111 (ID: 1) чата 1.
2025-05-29 03:16:13,421 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "отправка не убирается тварь"}}
2025-05-29 03:16:13,422 - ServerApp - INFO - Сообщение ID: 6 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T03:11:35.634702+07:00).
2025-05-29 03:16:13,422 - ServerApp - INFO - Сообщение (ID: 6) от 1111 в чат 1 сохранено.
2025-05-29 03:16:13,422 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 03:16:13,422 - ServerApp - INFO - Доставка сообщения (ID: 6) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 03:16:20,658 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:16:20,658 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:16:20,659 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:16:24,722 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:16:24,722 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:16:24,723 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:16:26,593 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:16:26,593 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 03:16:26,594 - ServerApp - DEBUG - Извлечено 6 сообщений для chat_id: 1
2025-05-29 03:16:30,513 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:16:30,513 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:16:30,514 - ServerApp - DEBUG - Извлечено 6 сообщений для chat_id: 1
2025-05-29 03:16:41,729 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "нук"}}
2025-05-29 03:16:41,730 - ServerApp - INFO - Сообщение ID: 7 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T03:16:13.422549+07:00).
2025-05-29 03:16:41,730 - ServerApp - INFO - Сообщение (ID: 7) от 1111 в чат 1 сохранено.
2025-05-29 03:16:41,731 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 03:16:41,731 - ServerApp - INFO - Доставка сообщения (ID: 7) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 03:16:43,641 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:16:43,642 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:16:43,642 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:16:44,769 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:16:44,769 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:16:44,770 - ServerApp - DEBUG - Извлечено 7 сообщений для chat_id: 1
2025-05-29 03:16:51,401 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "странно"}}
2025-05-29 03:16:51,402 - ServerApp - INFO - Сообщение ID: 8 от user_id: 2 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T03:16:04.738908+07:00).
2025-05-29 03:16:51,402 - ServerApp - INFO - Сообщение (ID: 8) от 2222 в чат 1 сохранено.
2025-05-29 03:16:51,402 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 2 - 2222): [1]
2025-05-29 03:16:51,403 - ServerApp - INFO - Доставка сообщения (ID: 8) от 2222 участнику 1111 (ID: 1) чата 1.
2025-05-29 03:16:52,562 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:16:52,562 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:16:52,562 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:16:56,456 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:16:56,457 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:16:56,457 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:16:58,545 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:16:58,546 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:16:58,546 - ServerApp - DEBUG - Извлечено 8 сообщений для chat_id: 1
2025-05-29 03:18:49,089 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "111"}}
2025-05-29 03:18:49,090 - ServerApp - INFO - Сообщение ID: 9 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T03:16:41.730885+07:00).
2025-05-29 03:18:49,090 - ServerApp - INFO - Сообщение (ID: 9) от 1111 в чат 1 сохранено.
2025-05-29 03:18:49,091 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 03:18:49,091 - ServerApp - INFO - Доставка сообщения (ID: 9) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 03:18:50,594 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:18:50,594 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:18:50,594 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:18:52,081 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:18:52,081 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:18:52,082 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 03:18:58,682 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:18:58,682 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:18:58,682 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:18:59,857 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:18:59,858 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 03:18:59,858 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 03:19:17,208 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:19:17,208 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:19:17,209 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:19:20,880 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:19:20,880 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:19:20,881 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:19:21,264 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:19:21,264 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:19:21,265 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:19:21,440 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:19:21,440 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:19:21,441 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:19:21,592 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:19:21,592 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:19:21,593 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:19:23,977 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:19:23,977 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:19:23,978 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 03:19:24,953 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:19:24,953 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:19:24,954 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:21:21,185 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:21:21,185 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:21:21,186 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:21:22,832 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49392)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:21:22,832 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:21:22,833 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:21:24,457 - ServerApp - INFO - Клиент 2222 (('127.0.0.1', 49392)) отключился.
2025-05-29 03:21:24,457 - ServerApp - INFO - Клиент 2222 (('127.0.0.1', 49392)) удален из активных.
2025-05-29 03:21:24,457 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 49392) (пользователь: 2222) закрыто.
2025-05-29 03:21:24,457 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 49392) (пользователь: 2222) освобождены.
2025-05-29 03:21:32,994 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 49587)
2025-05-29 03:21:33,113 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 03:21:35,858 - ServerApp - DEBUG - Получено от ('127.0.0.1', 49587) (аутентификация): {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 03:21:40,241 - ServerApp - DEBUG - Получено от ('127.0.0.1', 49587) (аутентификация): {"type": "login", "payload": {"username": "2222", "password": "2222"}}
2025-05-29 03:21:40,403 - ServerApp - INFO - Клиент ('127.0.0.1', 49587) аутентифицирован как 2222 (ID: 2)
2025-05-29 03:21:40,403 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:21:40,407 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:21:40,407 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49587)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:21:40,407 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 03:21:40,407 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 03:21:41,809 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 49587)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:21:41,809 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 03:21:41,810 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 03:21:45,169 - ServerApp - INFO - Клиент 2222 (('127.0.0.1', 49587)) отключился.
2025-05-29 03:21:45,169 - ServerApp - INFO - Клиент 2222 (('127.0.0.1', 49587)) удален из активных.
2025-05-29 03:21:45,169 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 49587) (пользователь: 2222) закрыто.
2025-05-29 03:21:45,169 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 49587) (пользователь: 2222) освобождены.
2025-05-29 03:21:56,280 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_list", "payload": {}}
2025-05-29 03:21:56,280 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 03:21:56,281 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 03:21:57,506 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 49334)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:21:57,506 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 03:21:57,506 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 03:22:01,489 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 49334)) отключился.
2025-05-29 03:22:01,489 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 49334)) удален из активных.
2025-05-29 03:22:01,490 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 49334) (пользователь: 1111) закрыто.
2025-05-29 03:22:01,490 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 49334) (пользователь: 1111) освобождены.
2025-05-29 03:31:15,874 - ServerApp - INFO - Получен сигнал KeyboardInterrupt (Ctrl+C)...
2025-05-29 03:31:15,874 - ServerApp - INFO - Сервер останавливается...
2025-05-29 03:31:15,874 - ServerApp - INFO - Сервер полностью остановлен.
