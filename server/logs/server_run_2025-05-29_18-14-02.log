2025-05-29 18:14:02,160 - ServerApp - INFO - Запуск серверного приложения...
2025-05-29 18:14:02,160 - ServerApp - INFO - Сервер запущен и слушает на 127.0.0.1:65432
2025-05-29 18:14:02,160 - ServerApp - INFO - Для остановки сервера нажмите Ctrl+C в этой консоли.
2025-05-29 18:14:05,966 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 50274)
2025-05-29 18:14:10,523 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 18:14:10,523 - ServerApp - DEBUG - Получено от ('127.0.0.1', 50274) (аутентификация): {"type": "login", "payload": {"username": "2222", "password": "2222"}}
2025-05-29 18:14:10,834 - ServerApp - INFO - Клиент ('127.0.0.1', 50274) аутентифицирован как 2222 (ID: 2)
2025-05-29 18:14:10,834 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:14:10,853 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:14:10,853 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:14:10,853 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:14:10,854 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:14:14,263 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:14:14,263 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 18:14:14,264 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 18:15:00,015 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 50276)
2025-05-29 18:15:00,144 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 18:15:03,991 - ServerApp - DEBUG - Получено от ('127.0.0.1', 50276) (аутентификация): {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 18:15:04,191 - ServerApp - INFO - Клиент ('127.0.0.1', 50276) аутентифицирован как 1111 (ID: 1)
2025-05-29 18:15:04,191 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:15:04,196 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:15:04,196 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:04,196 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:15:04,197 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:15:05,719 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:15:05,719 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 18:15:05,720 - ServerApp - DEBUG - Извлечено 9 сообщений для chat_id: 1
2025-05-29 18:15:11,599 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "ццц"}}
2025-05-29 18:15:11,921 - ServerApp - INFO - Сообщение ID: 10 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T18:15:03.991167+07:00).
2025-05-29 18:15:11,922 - ServerApp - INFO - Сообщение (ID: 10) от 1111 в чат 1 сохранено.
2025-05-29 18:15:11,922 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 18:15:11,922 - ServerApp - INFO - Доставка сообщения (ID: 10) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 18:15:11,924 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:11,924 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:11,925 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:13,823 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "222"}}
2025-05-29 18:15:13,826 - ServerApp - INFO - Сообщение ID: 11 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T18:15:11.922173+07:00).
2025-05-29 18:15:13,827 - ServerApp - INFO - Сообщение (ID: 11) от 1111 в чат 1 сохранено.
2025-05-29 18:15:13,827 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 18:15:13,827 - ServerApp - INFO - Доставка сообщения (ID: 11) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 18:15:13,828 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:13,828 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:13,829 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:16,430 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:16,430 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:16,431 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:17,334 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:15:17,334 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 18:15:17,335 - ServerApp - DEBUG - Извлечено 11 сообщений для chat_id: 1
2025-05-29 18:15:19,255 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:19,255 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:15:19,256 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:15:34,486 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:34,486 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:15:34,487 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:15:35,878 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:15:35,878 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 18:15:35,879 - ServerApp - DEBUG - Извлечено 11 сообщений для chat_id: 1
2025-05-29 18:15:39,414 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "уййй"}}
2025-05-29 18:15:39,417 - ServerApp - INFO - Сообщение ID: 12 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T18:15:13.827114+07:00).
2025-05-29 18:15:39,417 - ServerApp - INFO - Сообщение (ID: 12) от 1111 в чат 1 сохранено.
2025-05-29 18:15:39,418 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 18:15:39,418 - ServerApp - INFO - Доставка сообщения (ID: 12) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 18:15:39,419 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:39,419 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:39,420 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:40,486 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:40,486 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:15:40,487 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:15:41,510 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:15:41,510 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 18:15:41,511 - ServerApp - DEBUG - Извлечено 12 сообщений для chat_id: 1
2025-05-29 18:15:43,654 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:43,654 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 18:15:43,655 - ServerApp - DEBUG - Для user_id 1 найдено 1 чатов.
2025-05-29 18:15:44,798 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:44,798 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:44,799 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:46,094 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:15:46,094 - ServerApp - INFO - User_id 2 запросил историю для чата ID 1.
2025-05-29 18:15:46,095 - ServerApp - DEBUG - Извлечено 12 сообщений для chat_id: 1
2025-05-29 18:15:47,502 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:47,502 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:47,503 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:51,566 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 18:15:51,566 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 18:15:51,567 - ServerApp - DEBUG - Извлечено 12 сообщений для chat_id: 1
2025-05-29 18:15:53,782 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "123"}}
2025-05-29 18:15:53,785 - ServerApp - INFO - Сообщение ID: 13 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T18:15:39.418037+07:00).
2025-05-29 18:15:53,786 - ServerApp - INFO - Сообщение (ID: 13) от 1111 в чат 1 сохранено.
2025-05-29 18:15:53,786 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 18:15:53,786 - ServerApp - INFO - Доставка сообщения (ID: 13) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 18:15:53,787 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:53,787 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:53,788 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:57,821 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 50276)): {"type": "send_message_to_chat", "payload": {"chat_id": 1, "text": "123132"}}
2025-05-29 18:15:57,824 - ServerApp - INFO - Сообщение ID: 14 от user_id: 1 в chat_id: 1 сохранено, last_message_at обновлено (2025-05-29T18:15:53.786141+07:00).
2025-05-29 18:15:57,824 - ServerApp - INFO - Сообщение (ID: 14) от 1111 в чат 1 сохранено.
2025-05-29 18:15:57,824 - ServerApp - DEBUG - Участники чата 1 для рассылки (кроме 1 - 1111): [2]
2025-05-29 18:15:57,824 - ServerApp - INFO - Доставка сообщения (ID: 14) от 1111 участнику 2222 (ID: 2) чата 1.
2025-05-29 18:15:57,825 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:57,825 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:57,826 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:15:59,525 - ServerApp - DEBUG - Получено от 2222 (('127.0.0.1', 50274)): {"type": "request_chat_list", "payload": {}}
2025-05-29 18:15:59,525 - ServerApp - INFO - Пользователь ID 2 запросил список чатов.
2025-05-29 18:15:59,526 - ServerApp - DEBUG - Для user_id 2 найдено 1 чатов.
2025-05-29 18:16:02,681 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 50276)) отключился.
2025-05-29 18:16:02,681 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 50276)) удален из активных.
2025-05-29 18:16:02,681 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 50276) (пользователь: 1111) закрыто.
2025-05-29 18:16:02,681 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 50276) (пользователь: 1111) освобождены.
2025-05-29 18:16:04,006 - ServerApp - INFO - Клиент 2222 (('127.0.0.1', 50274)) отключился.
2025-05-29 18:16:04,006 - ServerApp - INFO - Клиент 2222 (('127.0.0.1', 50274)) удален из активных.
2025-05-29 18:16:04,006 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 50274) (пользователь: 2222) закрыто.
2025-05-29 18:16:04,006 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 50274) (пользователь: 2222) освобождены.
2025-05-29 18:22:08,325 - ServerApp - INFO - Получен сигнал KeyboardInterrupt (Ctrl+C)...
2025-05-29 18:22:08,325 - ServerApp - INFO - Сервер останавливается...
2025-05-29 18:22:08,325 - ServerApp - INFO - Сервер полностью остановлен.
