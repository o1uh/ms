2025-05-29 20:43:41,336 - ServerApp - INFO - Запуск серверного приложения...
2025-05-29 20:43:41,336 - ServerApp - INFO - Сервер запущен и слушает на 127.0.0.1:65432
2025-05-29 20:43:41,336 - ServerApp - INFO - Для остановки сервера нажмите Ctrl+C в этой консоли.
2025-05-29 20:44:02,265 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 52466)
2025-05-29 20:44:02,285 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 20:44:06,410 - ServerApp - DEBUG - Получено от ('127.0.0.1', 52466) (аутентификация): {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 20:44:06,571 - ServerApp - INFO - Клиент ('127.0.0.1', 52466) аутентифицирован как 1111 (ID: 1)
2025-05-29 20:44:06,572 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:44:06,575 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:44:06,575 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:44:06,575 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:44:06,576 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:44:07,434 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 52468)
2025-05-29 20:44:07,553 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-29 20:44:10,521 - ServerApp - DEBUG - Получено от ('127.0.0.1', 52468) (аутентификация): {"type": "login", "payload": {"username": "3333", "password": "3333"}}
2025-05-29 20:44:10,681 - ServerApp - INFO - Клиент ('127.0.0.1', 52468) аутентифицирован как 3333 (ID: 3)
2025-05-29 20:44:10,681 - ServerApp - INFO - Пользователь ID 3 запросил список чатов.
2025-05-29 20:44:10,684 - ServerApp - DEBUG - Для user_id 3 найдено 3 чатов.
2025-05-29 20:44:10,684 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:44:10,684 - ServerApp - INFO - Пользователь ID 3 запросил список чатов.
2025-05-29 20:44:10,685 - ServerApp - DEBUG - Для user_id 3 найдено 3 чатов.
2025-05-29 20:44:17,850 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_history", "payload": {"chat_id": 6}}
2025-05-29 20:44:17,850 - ServerApp - INFO - User_id 1 запросил историю для чата ID 6.
2025-05-29 20:44:17,851 - ServerApp - DEBUG - Извлечено 0 сообщений для chat_id: 6
2025-05-29 20:44:21,218 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "12"}}
2025-05-29 20:44:21,218 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='12...'
2025-05-29 20:44:21,219 - ServerApp - DEBUG - Сообщение вставлено, ID: 77, Время БД: 2025-05-29T20:44:21.218510+07:00
2025-05-29 20:44:21,219 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:21.218510+07:00
2025-05-29 20:44:21,219 - ServerApp - INFO - Сообщение ID: 77 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:21.218510+07:00).
2025-05-29 20:44:21,219 - ServerApp - INFO - Сообщение (ID: 77) от 1111 в чат 6 сохранено.
2025-05-29 20:44:21,219 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:44:21,219 - ServerApp - INFO - Доставка сообщения (ID: 77) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:44:21,230 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:44:21,230 - ServerApp - INFO - Пользователь ID 3 запросил список чатов.
2025-05-29 20:44:21,230 - ServerApp - DEBUG - Для user_id 3 найдено 3 чатов.
2025-05-29 20:44:25,738 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "request_chat_history", "payload": {"chat_id": 6}}
2025-05-29 20:44:25,739 - ServerApp - INFO - User_id 3 запросил историю для чата ID 6.
2025-05-29 20:44:25,739 - ServerApp - DEBUG - Извлечено 1 сообщений для chat_id: 6
2025-05-29 20:44:36,448 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "1"}}
2025-05-29 20:44:36,448 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='1...'
2025-05-29 20:44:36,451 - ServerApp - DEBUG - Сообщение вставлено, ID: 78, Время БД: 2025-05-29T20:44:36.448561+07:00
2025-05-29 20:44:36,451 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:36.448561+07:00
2025-05-29 20:44:36,451 - ServerApp - INFO - Сообщение ID: 78 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:36.448561+07:00).
2025-05-29 20:44:36,451 - ServerApp - INFO - Сообщение (ID: 78) от 3333 в чат 6 сохранено.
2025-05-29 20:44:36,452 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:36,452 - ServerApp - INFO - Доставка сообщения (ID: 78) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:36,960 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "2"}}
2025-05-29 20:44:36,960 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='2...'
2025-05-29 20:44:36,962 - ServerApp - DEBUG - Сообщение вставлено, ID: 79, Время БД: 2025-05-29T20:44:36.960343+07:00
2025-05-29 20:44:36,962 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:36.960343+07:00
2025-05-29 20:44:36,962 - ServerApp - INFO - Сообщение ID: 79 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:36.960343+07:00).
2025-05-29 20:44:36,962 - ServerApp - INFO - Сообщение (ID: 79) от 3333 в чат 6 сохранено.
2025-05-29 20:44:36,962 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:36,963 - ServerApp - INFO - Доставка сообщения (ID: 79) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:37,423 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "3"}}
2025-05-29 20:44:37,424 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='3...'
2025-05-29 20:44:37,424 - ServerApp - DEBUG - Сообщение вставлено, ID: 80, Время БД: 2025-05-29T20:44:37.424311+07:00
2025-05-29 20:44:37,424 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:37.424311+07:00
2025-05-29 20:44:37,424 - ServerApp - INFO - Сообщение ID: 80 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:37.424311+07:00).
2025-05-29 20:44:37,425 - ServerApp - INFO - Сообщение (ID: 80) от 3333 в чат 6 сохранено.
2025-05-29 20:44:37,425 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:37,425 - ServerApp - INFO - Доставка сообщения (ID: 80) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:37,920 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "4"}}
2025-05-29 20:44:37,920 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='4...'
2025-05-29 20:44:37,920 - ServerApp - DEBUG - Сообщение вставлено, ID: 81, Время БД: 2025-05-29T20:44:37.920338+07:00
2025-05-29 20:44:37,920 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:37.920338+07:00
2025-05-29 20:44:37,921 - ServerApp - INFO - Сообщение ID: 81 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:37.920338+07:00).
2025-05-29 20:44:37,921 - ServerApp - INFO - Сообщение (ID: 81) от 3333 в чат 6 сохранено.
2025-05-29 20:44:37,921 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:37,921 - ServerApp - INFO - Доставка сообщения (ID: 81) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:38,384 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "5"}}
2025-05-29 20:44:38,384 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='5...'
2025-05-29 20:44:38,384 - ServerApp - DEBUG - Сообщение вставлено, ID: 82, Время БД: 2025-05-29T20:44:38.384449+07:00
2025-05-29 20:44:38,384 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:38.384449+07:00
2025-05-29 20:44:38,385 - ServerApp - INFO - Сообщение ID: 82 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:38.384449+07:00).
2025-05-29 20:44:38,385 - ServerApp - INFO - Сообщение (ID: 82) от 3333 в чат 6 сохранено.
2025-05-29 20:44:38,385 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:38,385 - ServerApp - INFO - Доставка сообщения (ID: 82) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:38,896 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "6"}}
2025-05-29 20:44:38,896 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='6...'
2025-05-29 20:44:38,898 - ServerApp - DEBUG - Сообщение вставлено, ID: 83, Время БД: 2025-05-29T20:44:38.896555+07:00
2025-05-29 20:44:38,898 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:38.896555+07:00
2025-05-29 20:44:38,899 - ServerApp - INFO - Сообщение ID: 83 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:38.896555+07:00).
2025-05-29 20:44:38,899 - ServerApp - INFO - Сообщение (ID: 83) от 3333 в чат 6 сохранено.
2025-05-29 20:44:38,899 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:38,899 - ServerApp - INFO - Доставка сообщения (ID: 83) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:40,208 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "7"}}
2025-05-29 20:44:40,208 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='7...'
2025-05-29 20:44:40,211 - ServerApp - DEBUG - Сообщение вставлено, ID: 84, Время БД: 2025-05-29T20:44:40.208843+07:00
2025-05-29 20:44:40,211 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:40.208843+07:00
2025-05-29 20:44:40,211 - ServerApp - INFO - Сообщение ID: 84 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:40.208843+07:00).
2025-05-29 20:44:40,211 - ServerApp - INFO - Сообщение (ID: 84) от 3333 в чат 6 сохранено.
2025-05-29 20:44:40,211 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:44:40,211 - ServerApp - INFO - Доставка сообщения (ID: 84) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:44:42,913 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "8"}}
2025-05-29 20:44:42,913 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='8...'
2025-05-29 20:44:42,914 - ServerApp - DEBUG - Сообщение вставлено, ID: 85, Время БД: 2025-05-29T20:44:42.913611+07:00
2025-05-29 20:44:42,914 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:42.913611+07:00
2025-05-29 20:44:42,914 - ServerApp - INFO - Сообщение ID: 85 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:42.913611+07:00).
2025-05-29 20:44:42,914 - ServerApp - INFO - Сообщение (ID: 85) от 1111 в чат 6 сохранено.
2025-05-29 20:44:42,914 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:44:42,914 - ServerApp - INFO - Доставка сообщения (ID: 85) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:44:43,616 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "9"}}
2025-05-29 20:44:43,617 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='9...'
2025-05-29 20:44:43,617 - ServerApp - DEBUG - Сообщение вставлено, ID: 86, Время БД: 2025-05-29T20:44:43.617198+07:00
2025-05-29 20:44:43,617 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:43.617198+07:00
2025-05-29 20:44:43,617 - ServerApp - INFO - Сообщение ID: 86 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:43.617198+07:00).
2025-05-29 20:44:43,617 - ServerApp - INFO - Сообщение (ID: 86) от 1111 в чат 6 сохранено.
2025-05-29 20:44:43,618 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:44:43,618 - ServerApp - INFO - Доставка сообщения (ID: 86) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:44:44,688 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "10"}}
2025-05-29 20:44:44,689 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='10...'
2025-05-29 20:44:44,689 - ServerApp - DEBUG - Сообщение вставлено, ID: 87, Время БД: 2025-05-29T20:44:44.689285+07:00
2025-05-29 20:44:44,689 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:44.689285+07:00
2025-05-29 20:44:44,689 - ServerApp - INFO - Сообщение ID: 87 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:44.689285+07:00).
2025-05-29 20:44:44,690 - ServerApp - INFO - Сообщение (ID: 87) от 1111 в чат 6 сохранено.
2025-05-29 20:44:44,690 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:44:44,690 - ServerApp - INFO - Доставка сообщения (ID: 87) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:44:45,265 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "11"}}
2025-05-29 20:44:45,265 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='11...'
2025-05-29 20:44:45,265 - ServerApp - DEBUG - Сообщение вставлено, ID: 88, Время БД: 2025-05-29T20:44:45.265459+07:00
2025-05-29 20:44:45,265 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:44:45.265459+07:00
2025-05-29 20:44:45,266 - ServerApp - INFO - Сообщение ID: 88 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:44:45.265459+07:00).
2025-05-29 20:44:45,266 - ServerApp - INFO - Сообщение (ID: 88) от 1111 в чат 6 сохранено.
2025-05-29 20:44:45,266 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:44:45,266 - ServerApp - INFO - Доставка сообщения (ID: 88) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:44:47,090 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:44:47,090 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:44:47,091 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:44:50,585 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_history", "payload": {"chat_id": 6}}
2025-05-29 20:44:50,585 - ServerApp - INFO - User_id 1 запросил историю для чата ID 6.
2025-05-29 20:44:50,586 - ServerApp - DEBUG - Извлечено 12 сообщений для chat_id: 6
2025-05-29 20:45:11,324 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "0"}}
2025-05-29 20:45:11,324 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='0...'
2025-05-29 20:45:11,327 - ServerApp - DEBUG - Сообщение вставлено, ID: 89, Время БД: 2025-05-29T20:45:11.324787+07:00
2025-05-29 20:45:11,327 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:11.324787+07:00
2025-05-29 20:45:11,327 - ServerApp - INFO - Сообщение ID: 89 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:11.324787+07:00).
2025-05-29 20:45:11,327 - ServerApp - INFO - Сообщение (ID: 89) от 3333 в чат 6 сохранено.
2025-05-29 20:45:11,327 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:45:11,327 - ServerApp - INFO - Доставка сообщения (ID: 89) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:45:11,564 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "1"}}
2025-05-29 20:45:11,564 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='1...'
2025-05-29 20:45:11,567 - ServerApp - DEBUG - Сообщение вставлено, ID: 90, Время БД: 2025-05-29T20:45:11.564649+07:00
2025-05-29 20:45:11,567 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:11.564649+07:00
2025-05-29 20:45:11,567 - ServerApp - INFO - Сообщение ID: 90 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:11.564649+07:00).
2025-05-29 20:45:11,567 - ServerApp - INFO - Сообщение (ID: 90) от 3333 в чат 6 сохранено.
2025-05-29 20:45:11,568 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:45:11,568 - ServerApp - INFO - Доставка сообщения (ID: 90) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:45:11,901 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "2"}}
2025-05-29 20:45:11,902 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='2...'
2025-05-29 20:45:11,902 - ServerApp - DEBUG - Сообщение вставлено, ID: 91, Время БД: 2025-05-29T20:45:11.902310+07:00
2025-05-29 20:45:11,902 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:11.902310+07:00
2025-05-29 20:45:11,903 - ServerApp - INFO - Сообщение ID: 91 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:11.902310+07:00).
2025-05-29 20:45:11,903 - ServerApp - INFO - Сообщение (ID: 91) от 3333 в чат 6 сохранено.
2025-05-29 20:45:11,903 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:45:11,903 - ServerApp - INFO - Доставка сообщения (ID: 91) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:45:12,204 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "3"}}
2025-05-29 20:45:12,204 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='3...'
2025-05-29 20:45:12,205 - ServerApp - DEBUG - Сообщение вставлено, ID: 92, Время БД: 2025-05-29T20:45:12.204848+07:00
2025-05-29 20:45:12,205 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:12.204848+07:00
2025-05-29 20:45:12,205 - ServerApp - INFO - Сообщение ID: 92 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:12.204848+07:00).
2025-05-29 20:45:12,205 - ServerApp - INFO - Сообщение (ID: 92) от 3333 в чат 6 сохранено.
2025-05-29 20:45:12,205 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:45:12,205 - ServerApp - INFO - Доставка сообщения (ID: 92) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:45:13,580 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "4"}}
2025-05-29 20:45:13,580 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=3, content='4...'
2025-05-29 20:45:13,581 - ServerApp - DEBUG - Сообщение вставлено, ID: 93, Время БД: 2025-05-29T20:45:13.580831+07:00
2025-05-29 20:45:13,581 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:13.580831+07:00
2025-05-29 20:45:13,583 - ServerApp - INFO - Сообщение ID: 93 от user_id: 3 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:13.580831+07:00).
2025-05-29 20:45:13,583 - ServerApp - INFO - Сообщение (ID: 93) от 3333 в чат 6 сохранено.
2025-05-29 20:45:13,583 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 3 - 3333): [1]
2025-05-29 20:45:13,583 - ServerApp - INFO - Доставка сообщения (ID: 93) от 3333 участнику 1111 (ID: 1) чата 6.
2025-05-29 20:45:16,236 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "5"}}
2025-05-29 20:45:16,236 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='5...'
2025-05-29 20:45:16,239 - ServerApp - DEBUG - Сообщение вставлено, ID: 94, Время БД: 2025-05-29T20:45:16.236894+07:00
2025-05-29 20:45:16,239 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:16.236894+07:00
2025-05-29 20:45:16,239 - ServerApp - INFO - Сообщение ID: 94 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:16.236894+07:00).
2025-05-29 20:45:16,239 - ServerApp - INFO - Сообщение (ID: 94) от 1111 в чат 6 сохранено.
2025-05-29 20:45:16,240 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:45:16,240 - ServerApp - INFO - Доставка сообщения (ID: 94) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:45:16,524 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "6"}}
2025-05-29 20:45:16,524 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='6...'
2025-05-29 20:45:16,525 - ServerApp - DEBUG - Сообщение вставлено, ID: 95, Время БД: 2025-05-29T20:45:16.524812+07:00
2025-05-29 20:45:16,525 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:16.524812+07:00
2025-05-29 20:45:16,525 - ServerApp - INFO - Сообщение ID: 95 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:16.524812+07:00).
2025-05-29 20:45:16,525 - ServerApp - INFO - Сообщение (ID: 95) от 1111 в чат 6 сохранено.
2025-05-29 20:45:16,525 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:45:16,525 - ServerApp - INFO - Доставка сообщения (ID: 95) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:45:16,844 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "7"}}
2025-05-29 20:45:16,844 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='7...'
2025-05-29 20:45:16,847 - ServerApp - DEBUG - Сообщение вставлено, ID: 96, Время БД: 2025-05-29T20:45:16.844840+07:00
2025-05-29 20:45:16,847 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:16.844840+07:00
2025-05-29 20:45:16,847 - ServerApp - INFO - Сообщение ID: 96 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:16.844840+07:00).
2025-05-29 20:45:16,847 - ServerApp - INFO - Сообщение (ID: 96) от 1111 в чат 6 сохранено.
2025-05-29 20:45:16,848 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:45:16,848 - ServerApp - INFO - Доставка сообщения (ID: 96) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:45:17,132 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "8"}}
2025-05-29 20:45:17,133 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='8...'
2025-05-29 20:45:17,133 - ServerApp - DEBUG - Сообщение вставлено, ID: 97, Время БД: 2025-05-29T20:45:17.133030+07:00
2025-05-29 20:45:17,133 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:17.133030+07:00
2025-05-29 20:45:17,133 - ServerApp - INFO - Сообщение ID: 97 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:17.133030+07:00).
2025-05-29 20:45:17,133 - ServerApp - INFO - Сообщение (ID: 97) от 1111 в чат 6 сохранено.
2025-05-29 20:45:17,133 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:45:17,134 - ServerApp - INFO - Доставка сообщения (ID: 97) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:45:17,580 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "send_message_to_chat", "payload": {"chat_id": 6, "text": "9"}}
2025-05-29 20:45:17,581 - ServerApp - DEBUG - Попытка INSERT сообщения: chat_id=6, sender_id=1, content='9...'
2025-05-29 20:45:17,582 - ServerApp - DEBUG - Сообщение вставлено, ID: 98, Время БД: 2025-05-29T20:45:17.581059+07:00
2025-05-29 20:45:17,583 - ServerApp - DEBUG - Попытка UPDATE chats: chat_id=6, last_message_at=2025-05-29T20:45:17.581059+07:00
2025-05-29 20:45:17,583 - ServerApp - INFO - Сообщение ID: 98 от user_id: 1 в chat_id: 6 сохранено, last_message_at обновлено (2025-05-29T20:45:17.581059+07:00).
2025-05-29 20:45:17,583 - ServerApp - INFO - Сообщение (ID: 98) от 1111 в чат 6 сохранено.
2025-05-29 20:45:17,583 - ServerApp - DEBUG - Участники чата 6 для рассылки (кроме 1 - 1111): [3]
2025-05-29 20:45:17,583 - ServerApp - INFO - Доставка сообщения (ID: 98) от 1111 участнику 3333 (ID: 3) чата 6.
2025-05-29 20:45:19,457 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:45:19,458 - ServerApp - INFO - Пользователь ID 3 запросил список чатов.
2025-05-29 20:45:19,458 - ServerApp - DEBUG - Для user_id 3 найдено 3 чатов.
2025-05-29 20:45:21,153 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "request_chat_history", "payload": {"chat_id": 6}}
2025-05-29 20:45:21,153 - ServerApp - INFO - User_id 3 запросил историю для чата ID 6.
2025-05-29 20:45:21,154 - ServerApp - DEBUG - Извлечено 22 сообщений для chat_id: 6
2025-05-29 20:45:24,898 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:45:24,898 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:45:24,899 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:45:32,722 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:45:32,722 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:45:32,723 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:45:36,730 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:45:36,730 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:45:36,731 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:45:40,114 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 20:45:40,114 - ServerApp - INFO - User_id 1 запросил историю для чата ID 1.
2025-05-29 20:45:40,114 - ServerApp - DEBUG - Извлечено 25 сообщений для chat_id: 1
2025-05-29 20:45:44,146 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:45:44,146 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:45:44,147 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:45:50,113 - ServerApp - DEBUG - Получено от 3333 (('127.0.0.1', 52468)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:45:50,113 - ServerApp - INFO - Пользователь ID 3 запросил список чатов.
2025-05-29 20:45:50,114 - ServerApp - DEBUG - Для user_id 3 найдено 3 чатов.
2025-05-29 20:46:00,434 - ServerApp - DEBUG - Получено от 1111 (('127.0.0.1', 52466)): {"type": "request_chat_list", "payload": {}}
2025-05-29 20:46:00,434 - ServerApp - INFO - Пользователь ID 1 запросил список чатов.
2025-05-29 20:46:00,435 - ServerApp - DEBUG - Для user_id 1 найдено 6 чатов.
2025-05-29 20:46:07,161 - ServerApp - INFO - Клиент 3333 (('127.0.0.1', 52468)) отключился.
2025-05-29 20:46:07,161 - ServerApp - INFO - Клиент 3333 (('127.0.0.1', 52468)) удален из активных.
2025-05-29 20:46:07,161 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 52468) (пользователь: 3333) закрыто.
2025-05-29 20:46:07,161 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 52468) (пользователь: 3333) освобождены.
2025-05-29 20:46:07,810 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 52466)) отключился.
2025-05-29 20:46:07,825 - ServerApp - INFO - Клиент 1111 (('127.0.0.1', 52466)) удален из активных.
2025-05-29 20:46:07,825 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 52466) (пользователь: 1111) закрыто.
2025-05-29 20:46:07,825 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 52466) (пользователь: 1111) освобождены.
2025-05-29 20:46:09,460 - ServerApp - INFO - Получен сигнал KeyboardInterrupt (Ctrl+C)...
2025-05-29 20:46:09,461 - ServerApp - INFO - Сервер останавливается...
2025-05-29 20:46:09,461 - ServerApp - INFO - Сервер полностью остановлен.
