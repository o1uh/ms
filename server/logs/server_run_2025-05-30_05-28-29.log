2025-05-30 05:28:29,873 - ServerApp - INFO - Запуск серверного приложения...
2025-05-30 05:28:29,873 - ServerApp - INFO - Сервер запущен и слушает на 127.0.0.1:65432
2025-05-30 05:28:29,874 - ServerApp - INFO - Для остановки сервера нажмите Ctrl+C в этой консоли.
2025-05-30 05:28:35,111 - ServerApp - INFO - Новое подключение от ('127.0.0.1', 56155)
2025-05-30 05:28:35,131 - ServerApp - INFO - Успешное подключение к базе данных PostgreSQL.
2025-05-30 05:28:39,112 - ServerApp - DEBUG - Получено от ('127.0.0.1', 56155) (аутентификация): {"type": "login", "payload": {"username": "4444", "password": "4444"}}
2025-05-30 05:28:39,273 - ServerApp - INFO - Клиент ('127.0.0.1', 56155) аутентифицирован как 4444 (ID: 5)
2025-05-30 05:28:39,274 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:39,277 - ServerApp - DEBUG - Для user_id 5 найдено 2 чатов.
2025-05-30 05:28:39,277 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:39,277 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:39,277 - ServerApp - DEBUG - Для user_id 5 найдено 2 чатов.
2025-05-30 05:28:46,558 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "initiate_direct_chat", "payload": {"target_username": "1111"}}
2025-05-30 05:28:46,559 - ServerApp - INFO - Создание нового direct чата для пользователей 5 и 1
2025-05-30 05:28:46,561 - ServerApp - INFO - Новый direct чат ID: 10 создан, участники добавлены.
2025-05-30 05:28:46,561 - ServerApp - INFO - Чат между 4444 (ID:5) и 1111 (ID:1) инициирован/найден. Chat ID: 10
2025-05-30 05:28:46,563 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_history", "payload": {"chat_id": 10}}
2025-05-30 05:28:46,563 - ServerApp - INFO - User_id 5 запросил историю для чата ID 10.
2025-05-30 05:28:46,563 - ServerApp - DEBUG - Извлечено 0 сообщений для chat_id: 10
2025-05-30 05:28:47,544 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:47,544 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:47,545 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:28:49,768 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_history", "payload": {"chat_id": 10}}
2025-05-30 05:28:49,768 - ServerApp - INFO - User_id 5 запросил историю для чата ID 10.
2025-05-30 05:28:49,768 - ServerApp - DEBUG - Извлечено 0 сообщений для chat_id: 10
2025-05-30 05:28:50,768 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:50,768 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:50,769 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:28:51,335 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:51,335 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:51,335 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:28:51,783 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:51,783 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:51,783 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:28:51,942 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:51,942 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:51,943 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:28:52,110 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:28:52,111 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:28:52,111 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:05,879 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:05,879 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:05,879 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:06,246 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:06,247 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:06,247 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:06,407 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:06,407 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:06,407 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:06,582 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:06,582 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:06,583 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:06,742 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:06,742 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:06,743 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:06,911 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:06,911 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:06,911 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:07,087 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:07,087 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:07,087 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:07,231 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:07,231 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:07,231 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:07,407 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:07,407 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:07,407 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:07,574 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:07,575 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:07,575 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:08,095 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:08,095 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:08,096 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:08,278 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:08,279 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:08,279 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:15,543 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "initiate_direct_chat", "payload": {"target_username": "562"}}
2025-05-30 05:29:16,435 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:16,435 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:16,436 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:19,134 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "initiate_direct_chat", "payload": {"target_username": "12312313"}}
2025-05-30 05:29:19,939 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:19,939 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:19,940 - ServerApp - DEBUG - Для user_id 5 найдено 3 чатов.
2025-05-30 05:29:21,934 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "create_group_request", "payload": {"group_name": "123132", "member_usernames": []}}
2025-05-30 05:29:21,935 - ServerApp - INFO - Создан групповой чат '123132' с ID: 11 от создателя ID: 5
2025-05-30 05:29:21,935 - ServerApp - INFO - Создатель ID: 5 добавлен в чат 11 как админ.
2025-05-30 05:29:22,770 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:22,771 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:22,772 - ServerApp - DEBUG - Для user_id 5 найдено 4 чатов.
2025-05-30 05:29:22,772 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_history", "payload": {"chat_id": 11}}
2025-05-30 05:29:22,772 - ServerApp - INFO - User_id 5 запросил историю для чата ID 11.
2025-05-30 05:29:22,772 - ServerApp - DEBUG - Извлечено 0 сообщений для chat_id: 11
2025-05-30 05:29:26,176 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:26,176 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:26,177 - ServerApp - DEBUG - Для user_id 5 найдено 4 чатов.
2025-05-30 05:29:29,526 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "create_group_request", "payload": {"group_name": "123132", "member_usernames": ["123213"]}}
2025-05-30 05:29:29,527 - ServerApp - WARNING - При создании группы '123132' не найден пользователь '123213'.
2025-05-30 05:29:33,831 - ServerApp - DEBUG - Получено от 4444 (('127.0.0.1', 56155)): {"type": "request_chat_list", "payload": {}}
2025-05-30 05:29:33,831 - ServerApp - INFO - Пользователь ID 5 запросил список чатов.
2025-05-30 05:29:33,832 - ServerApp - DEBUG - Для user_id 5 найдено 4 чатов.
2025-05-30 05:29:35,672 - ServerApp - INFO - Клиент 4444 (('127.0.0.1', 56155)) отключился.
2025-05-30 05:29:35,672 - ServerApp - INFO - Клиент 4444 (('127.0.0.1', 56155)) удален из активных.
2025-05-30 05:29:35,672 - ServerApp - DEBUG - Соединение с БД для ('127.0.0.1', 56155) (пользователь: 4444) закрыто.
2025-05-30 05:29:35,672 - ServerApp - DEBUG - Ресурсы для ('127.0.0.1', 56155) (пользователь: 4444) освобождены.
2025-05-30 05:29:37,630 - ServerApp - INFO - Получен сигнал KeyboardInterrupt (Ctrl+C)...
2025-05-30 05:29:37,631 - ServerApp - INFO - Сервер останавливается...
2025-05-30 05:29:37,631 - ServerApp - INFO - Сервер полностью остановлен.
