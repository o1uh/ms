2025-05-29 03:21:31,140 - ClientApp - INFO - Запуск клиентского приложения...
2025-05-29 03:21:31,154 - ClientApp - INFO - Инициализация главного окна клиента...
2025-05-29 03:21:31,160 - ClientApp - INFO - UI клиента инициализирован.
2025-05-29 03:21:31,239 - ClientApp - INFO - Главное окно клиента отображено.
2025-05-29 03:21:32,992 - ClientApp - INFO - Попытка подключения к 127.0.0.1:65432
2025-05-29 03:21:32,995 - ClientApp - INFO - Успешно подключено к серверу 127.0.0.1:65432
2025-05-29 03:21:32,996 - ClientApp - INFO - UI: Панель аутентификации. Статус: Подключено к 127.0.0.1. Введите данные.
2025-05-29 03:21:35,856 - ClientApp - INFO - Отправка запроса на вход для: 1111
2025-05-29 03:21:35,857 - ClientApp - DEBUG - Отправлено на сервер: {"type": "login", "payload": {"username": "1111", "password": "1111"}}
2025-05-29 03:21:36,018 - ClientApp - INFO - Получено полное сообщение от сервера: {"type": "login_status", "payload": {"status": "error", "message": "Пользователь '1111' уже в сети."}}
2025-05-29 03:21:36,019 - ClientApp - WARNING - Ошибка логина: Пользователь '1111' уже в сети.
2025-05-29 03:21:37,594 - ClientApp - INFO - UI: Панель аутентификации. Статус: Подключено. Ошибка входа: Пользователь '1111' уже в сети.
2025-05-29 03:21:40,240 - ClientApp - INFO - Отправка запроса на вход для: 2222
2025-05-29 03:21:40,240 - ClientApp - DEBUG - Отправлено на сервер: {"type": "login", "payload": {"username": "2222", "password": "2222"}}
2025-05-29 03:21:40,403 - ClientApp - INFO - Получено полное сообщение от сервера: {"type": "login_status", "payload": {"status": "success", "message": "Успешный вход.", "username": "2222", "user_id": 2}}
2025-05-29 03:21:40,404 - ClientApp - INFO - Логин успешен как 2222 (ID: 2).
2025-05-29 03:21:40,404 - ClientApp - INFO - UI: Панель списка чатов для 2222.
2025-05-29 03:21:40,404 - ClientApp - INFO - Пользователь 2222 запрашивает список чатов.
2025-05-29 03:21:40,404 - ClientApp - DEBUG - Отправлено на сервер: {"type": "request_chat_list", "payload": {}}
2025-05-29 03:21:40,407 - ClientApp - INFO - Получено полное сообщение от сервера: {"type": "chat_list_response", "payload": {"chats": [{"chat_id": 1, "chat_type": "direct", "chat_name": "1111", "last_message_at": "2025-05-29T03:16:41.730885+07:00", "last_message_text": "111", "other_user_id": 1, "other_username": "1111", "unread_count": 0}]}}
2025-05-29 03:21:40,407 - ClientApp - INFO - Получен список из 1 чатов.
2025-05-29 03:21:40,423 - ClientApp - INFO - Получено полное сообщение от сервера: {"type": "chat_list_response", "payload": {"chats": [{"chat_id": 1, "chat_type": "direct", "chat_name": "1111", "last_message_at": "2025-05-29T03:16:41.730885+07:00", "last_message_text": "111", "other_user_id": 1, "other_username": "1111", "unread_count": 0}]}}
2025-05-29 03:21:40,423 - ClientApp - INFO - Получен список из 1 чатов.
2025-05-29 03:21:41,807 - ClientApp - INFO - Выбран чат из списка: ID 1, Отображаемое имя 1111
2025-05-29 03:21:41,808 - ClientApp - INFO - UI: Открыт чат ID 1 (1111). Запрос истории.
2025-05-29 03:21:41,808 - ClientApp - INFO - Запрос истории для чата ID: 1
2025-05-29 03:21:41,808 - ClientApp - DEBUG - Отправлено на сервер: {"type": "request_chat_history", "payload": {"chat_id": 1}}
2025-05-29 03:21:41,810 - ClientApp - INFO - Получено полное сообщение от сервера: {"type": "chat_history", "payload": {"chat_id": 1, "messages": [{"message_id": 1, "sender_username": "2222", "sender_id": 2, "text": "132", "timestamp": "2025-05-29T01:23:41.159331+07:00"}, {"message_id": 2, "sender_username": "1111", "sender_id": 1, "text": "13", "timestamp": "2025-05-29T01:30:40.887900+07:00"}, {"message_id": 3, "sender_username": "1111", "sender_id": 1, "text": "123", "timestamp": "2025-05-29T01:52:09.014815+07:00"}, {"message_id": 6, "sender_username": "1111", "sender_id": 1, "text": "отправка не убирается тварь", "timestamp": "2025-05-29T03:11:35.634702+07:00"}, {"message_id": 4, "sender_username": "2222", "sender_id": 2, "text": "АХАХАХХАХАХА", "timestamp": "2025-05-29T03:13:12.130367+07:00"}, {"message_id": 5, "sender_username": "2222", "sender_id": 2, "text": "а щас", "timestamp": "2025-05-29T03:13:27.444301+07:00"}, {"message_id": 8, "sender_username": "2222", "sender_id": 2, "text": "странно", "timestamp": "2025-05-29T03:16:04.738908+07:00"}, {"message_id": 7, "sender_username": "1111", "sender_id": 1, "text": "нук", "timestamp": "2025-05-29T03:16:13.422549+07:00"}, {"message_id": 9, "sender_username": "1111", "sender_id": 1, "text": "111", "timestamp": "2025-05-29T03:16:41.730885+07:00"}]}}
2025-05-29 03:21:41,810 - ClientApp - INFO - Получена история для чата ID 1 (9 сообщений).
2025-05-29 03:21:45,169 - ClientApp - INFO - Окно клиента закрывается. Отключение от сервера.
2025-05-29 03:21:45,169 - ClientApp - INFO - Отключено от сервера.
2025-05-29 03:21:45,170 - ClientApp - INFO - UI: Панель подключения. Статус: Соединение с сервером разорвано.
2025-05-29 03:21:45,174 - ClientApp - INFO - Клиентское приложение завершено с кодом: 0
